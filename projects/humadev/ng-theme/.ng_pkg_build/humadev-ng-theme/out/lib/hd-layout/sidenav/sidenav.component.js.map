{"version":3,"file":"sidenav.component.js","sourceRoot":"","sources":["sidenav.component.ts"],"names":[],"mappings":"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","sourcesContent":["import { LayoutService } from '../../services/layout.service';\nimport {\n  Component,\n  OnInit,\n  Input,\n  EventEmitter,\n  Output,\n  ViewChild,\n  ElementRef,\n  AfterViewInit,\n  Renderer2\n} from '@angular/core';\nimport { Router, ActivatedRoute, NavigationEnd } from '@angular/router';\nimport { Observable } from 'rxjs';\nimport { MenuService } from '../../services/menu.service';\nimport {\n  trigger,\n  state,\n  style,\n  animate,\n  transition\n} from '@angular/animations';\nimport { slideToRight } from '../../animations/router.animation';\nimport { intersection } from 'lodash-es';\nimport {\n  BreakpointObserver,\n  BreakpointState,\n  Breakpoints\n} from '@angular/cdk/layout';\nimport { MatSidenav } from '@angular/material';\n\n@Component({\n  // tslint:disable-next-line:component-selector\n  selector: 'hd-sidenav',\n  template: `<mat-progress-bar class=\"loader\" mode=\"indeterminate\" *ngIf='progressBar'></mat-progress-bar>\n<mat-sidenav-container>\n  <mat-sidenav #sidenav fixedInViewport='true' class=\"m-grid__item m-aside-left m-aside-left--skin-dark\" [attr.role]=\"isHandset\n? 'dialog' : 'navigation'\" [mode]=\"(isHandset | async)!.matches ? 'over' : 'side'\" [opened]=\"!(isHandset | async)!.matches || opened\">\n    <div class=\"toolbar-brand\">\n      <div class=\"logo\">\n        <a routerLink=\"\">\n          <img [src]=\"titleImg\">\n        </a>\n      </div>\n      <div class=\"toggler\" *ngIf=\"(isHandset | async)!.matches ? false : true\" (click)='toggle()'>\n        <!-- BEGIN: Left Aside Minimize Toggle -->\n        <a>\n          <span></span>\n        </a>\n        <!-- END -->\n      </div>\n    </div>\n    <div id=\"m_ver_menu\" class=\"m-aside-menu m-aside-menu--skin-dark m-aside-menu--submenu-skin-dark\" data-menu-vertical=\"true\"\n      data-menu-scrollable=\"false\" data-menu-dropdown-timeout=\"500\">\n      <ul *ngIf=\"nav === false; else fromVar\" class=\"m-menu__nav  m-menu__nav--dropdown-submenu-arrow\">\n        <ng-template ngFor let-level1 [ngForOf]=\"navFromRouter\" let-i=\"index\">\n          <ng-template [ngIf]=\"checkHidden(level1) === false && checkGroupAccess(level1)\">\n            <li hd-sidenav-item cdk-overlay-origin class=\"m-menu__item\" routerLinkActive=\"m-menu__item--active\" routerLinkActiveOptions=\"{ exact: true }\"\n              aria-haspopup=\"true\" [ngClass]=\"{'m-menu__item--open':childrenAndActive(level1)}\" [menu]='level1' [nav]='nav'\n              [navFromRouter]='navFromRouter' [index]='i'>\n            </li>\n          </ng-template>\n        </ng-template>\n      </ul>\n      <ng-template #fromVar>\n        <ng-template ngFor let-level1 [ngForOf]=\"nav\" let-i=\"index\">\n          <ng-template [ngIf]=\"checkHidden(level1) === false && checkGroupAccess(level1)\">\n            <li hd-sidenav-item cdk-overlay-origin class=\"m-menu__item\" routerLinkActive=\"m-menu__item--active\" routerLinkActiveOptions=\"{ exact: true }\"\n              aria-haspopup=\"true\" [ngClass]=\"{'m-menu__item--open':childrenAndActive(level1)}\" [menu]='level1' [nav]='nav'\n              [index]='i'>\n            </li>\n          </ng-template>\n        </ng-template>\n      </ng-template>\n    </div>\n  </mat-sidenav>\n  <mat-sidenav-content>\n    <ng-content></ng-content>\n  </mat-sidenav-content>\n</mat-sidenav-container>\n`,\n  styles: [`mat-sidenav-container{background:#f2f3f8;position:fixed;overflow:visible}.m-aside-left.m-aside-left--skin-dark{background-color:#2c2e3e}.m-aside-menu{height:calc(100vh - 70px);overflow-y:scroll}.m-aside-menu .m-menu__nav{list-style:none;padding:30px 0}dl,ol,ul{margin-top:0;margin-bottom:1rem}*,::after,::before{-webkit-box-sizing:inherit;box-sizing:inherit}.m-aside-menu .m-menu__nav>.m-menu__item{position:relative;margin:0}.m-aside-menu .m-menu__nav .m-menu__item{display:block;float:none;height:auto;padding:0}.m-aside-menu .m-menu__nav .m-menu__submenu{display:block;float:none;margin:0;padding:0}.m-aside-menu .m-menu__nav>.m-menu__item .m-menu__submenu .m-menu__item>.m-menu__heading .m-menu__link-bullet,.m-aside-menu .m-menu__nav>.m-menu__item .m-menu__submenu .m-menu__item>.m-menu__link .m-menu__link-bullet{vertical-align:middle;text-align:left;width:20px}.m-aside-menu .m-menu__nav .m-menu__item>.m-menu__heading .m-menu__link-bullet,.m-aside-menu .m-menu__nav .m-menu__item>.m-menu__link .m-menu__link-bullet{display:table-cell;height:100%;vertical-align:middle;line-height:0}.mat-drawer{min-width:4vw!important}.mat-sidenav{width:255px}.toolbar-brand{position:relative;vertical-align:middle;-webkit-transition:all .3s ease;transition:all .3s ease;height:70px;width:255px;table-layout:fixed;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-ms-flex-wrap:nowrap;flex-wrap:nowrap;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}.toolbar-brand .logo{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-flex:50%;-ms-flex:50%;flex:50%;-webkit-transition:all .3s ease;transition:all .3s ease;line-height:0;padding:15px 20px}.toolbar-brand .logo a img{height:45px}.toolbar-brand .toggler{padding:15px 20px;cursor:pointer}.toolbar-brand .toggler a{line-height:0;vertical-align:middle;cursor:pointer;display:inline-block;position:relative;margin:0;padding:0;width:26px;height:26px;font-size:0;text-indent:-9999px;-webkit-appearance:none;-moz-appearance:none;-webkit-box-shadow:none;box-shadow:none;border-radius:none;border:none;background:0 0;outline:0!important;-webkit-transition:all .4s ease;transition:all .4s ease}.toolbar-brand .toggler a span{background:#5d5f77;display:block;position:absolute;top:20px;height:1px;min-height:1px;width:100%;border-radius:0;-webkit-transition:all .4s ease;transition:all .4s ease}.toolbar-brand .toggler a span::before{top:-7px}.toolbar-brand .toggler a span::after{bottom:-7px}.toolbar-brand .toggler a span::after,.toolbar-brand .toggler a span::before{background:#5d5f77;position:absolute;display:block;left:0;width:100%;height:1px;min-height:1px;content:'';border-radius:0;-webkit-transition:all .4s ease;transition:all .4s ease}.toolbar-brand .toggler a.toggler-left span::before{-webkit-transition:all .4s ease;transition:all .4s ease;left:auto;right:0;width:50%}.toolbar-brand .toggler a.toggler-left span::after{-webkit-transition:all .4s ease;transition:all .4s ease;left:auto;right:0;width:75%}.toolbar-brand .toggler a.toggler-right span::before{left:0;right:auto;width:50%;-webkit-transition:width .4s ease;transition:width .4s ease}.toolbar-brand .toggler a.toggler-right span::after{left:0;right:auto;width:75%;-webkit-transition:width .4s ease;transition:width .4s ease}.toolbar-brand .toggler a:hover span,.toolbar-brand .toggler a:hover span::after,.toolbar-brand .toggler a:hover span::before{width:100%;background:#2a61ac}.loader{position:fixed;height:2px;z-index:9999;top:0}`],\n  animations: [slideToRight()]\n})\nexport class SidenavComponent implements OnInit, AfterViewInit {\n  @Input()\n  titleImg: string;\n  @Input()\n  nav: any = false;\n  @Input()\n  lazyLoadModule: any = false;\n  @Input()\n  navFromRouter: any;\n  @Input()\n  lazyLoadPath: string;\n  @Output()\n  pageTitle = new EventEmitter();\n  moduleConfig: any;\n  @Input()\n  opened = false;\n  sidenavClass = {\n    minimize: false\n  };\n  progressBar = false;\n  @ViewChild('sidenav')\n  sidenav: MatSidenav;\n  isHandset: Observable<BreakpointState> = this.breakpointObserver.observe(\n    Breakpoints.Handset\n  );\n\n  constructor(\n    private render: Renderer2,\n    private ref: ElementRef,\n    private router: Router,\n    private activeRoute: ActivatedRoute,\n    private menuService: MenuService,\n    public layoutService: LayoutService,\n    private breakpointObserver: BreakpointObserver\n  ) {\n    this.router.events.subscribe(() =>\n      this.layoutService.topProgressBar.next(true)\n    );\n  }\n\n  ngOnInit() {\n    if (this.nav === false) {\n      this.menuService.sidenav.subscribe(res => {\n        this.navFromRouter = res;\n      });\n    }\n    this.layoutService.sidebarOpen.subscribe(open => {\n      if (open) {\n        this.sidenav.open();\n      } else {\n        this.sidenav.close();\n      }\n    });\n    this.layoutService.topProgressBar.subscribe(\n      progress => (this.progressBar = progress)\n    );\n  }\n\n  ngAfterViewInit() {\n    // const content = this.ref.nativeElement.querySelector(\n    //   '.mat-sidenav-content'\n    // );\n    // this.layoutService.sidebarOpen.subscribe(open => {\n    //   this.render.addClass(content, 'animate-content');\n    //   if (open) {\n    //     this.render.setStyle(content, 'margin-left', '255px');\n    //   } else {\n    //     this.render.setStyle(content, 'margin-left', '70px');\n    //   }\n    // });\n    // this.isHandset.subscribe(res => {\n    //     if(res) {\n    //         this.render.setStyle(content, 'margin-left', '0');\n    //     }\n    // })\n  }\n\n  parentOpen(i: any) {\n    if (this.nav === false) {\n      if (\n        this.navFromRouter[i].isOpen === false ||\n        !this.navFromRouter[i].hasOwnProperty('isOpen')\n      ) {\n        this.navFromRouter[i].isOpen = true;\n      } else {\n        this.navFromRouter[i].isOpen = false;\n      }\n    } else {\n      if (\n        this.nav[i].isOpen === false ||\n        !this.nav[i].hasOwnProperty('isOpen')\n      ) {\n        this.nav[i].isOpen = true;\n      } else {\n        this.nav[i].isOpen = false;\n      }\n    }\n  }\n\n  isActive(instruction: any[]): boolean {\n    return this.router.isActive(this.router.createUrlTree(instruction), false);\n  }\n\n  childrenAndActive(level) {\n    if (\n      level.children &&\n      level.children.length > 0 &&\n      (level.isOpen || this.isActive([level.path]))\n    ) {\n      return true;\n    } else {\n      return false;\n    }\n  }\n\n  toggleChildren(level) {\n    if (\n      level.children &&\n      level.children.length > 0 &&\n      (level.isOpen || this.isActive([level.path]))\n    ) {\n      return 'active';\n    } else {\n      return 'inactive';\n    }\n  }\n\n  checkPath(row) {\n    if (row.path === '') {\n      return { exact: true };\n    } else {\n      return { exact: false };\n    }\n  }\n\n  @Output()\n  toggle() {\n    this.sidenav.close();\n    this.layoutService.sidebarOpen.next(false);\n  }\n\n  checkHidden(navItem) {\n    let hidden = false;\n    if (navItem.hasOwnProperty('redirectTo')) {\n      hidden = true;\n    } else {\n      if (navItem.hasOwnProperty('data')) {\n        if (navItem.data.hasOwnProperty('hidden')) {\n          hidden = navItem.data.hidden;\n        }\n      }\n    }\n    return hidden;\n  }\n\n  setPageToolbar(item) {\n    this.pageTitle.emit(item.name);\n  }\n\n  checkGroupAccess(menu, asal = '') {\n    if (\n      menu &&\n      menu.data &&\n      menu.data.groupAccess.permissions &&\n      menu.data.groupAccess.groups\n    ) {\n      const allowed =\n        intersection(\n          menu.data.groupAccess.permissions,\n          menu.data.groupAccess.groups\n        ).length > 0\n          ? true\n          : false;\n      if (allowed) {\n        return true;\n      } else {\n        return false;\n      }\n    } else {\n      return true;\n    }\n  }\n}\n"]}